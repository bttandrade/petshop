<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho de Compras</title>
    <link rel="stylesheet" href="../styles/style-shop.css">
</head>
<body>
    <main id="main">
        <div class="title">Carrinho de Compras</div>
        <section id="shopp-box">
            <section id="cart">
                
            </section>
            <section id="shopp-left">
                <section id="pricing">
                    <h3 id="resume">Resumo do Pedido</h3>
                    <div id="resume-values">
                        <h3>Valor:</h3>
                        <h3>Desconto:</h3>
                        <h3>Valor finalizado:</h3>
                    </div>
                    <div id="resume-btns">
                        <button class="buy">Finalizar Compra</button>
                        <button class="buy">Continuar Comprando</button>
                    </div>
                </section>
                <section id="cep-shop">
                    <label for="cepInput">Digite o CEP:</label>
                    <div id="cep-inputs">
                        <input type="text" id="cepInput">
                        <button onclick="buscarEndereco()">Buscar</button>
                        <div id="endereco"></div>
                    </div>
                </section>
            </section>
        </section>
    </main>

    <script>
        // Função para exibir os itens do carrinho na página do carrinho
        function displayCart() {
          const cart = JSON.parse(localStorage.getItem('cart'));
          const cartList = document.getElementById('cart');
        
          // Limpa o conteúdo atual do carrinho
          cartList.innerHTML = '';
        
          // Verifica se há itens no carrinho
          if (cart && cart.length > 0) {
            // Loop através de cada item do carrinho e adiciona à lista
            cart.forEach(item => {
              const cartItem = document.createElement('li');
        
              const itemImage = document.createElement('img');
              itemImage.src = item.image;
              itemImage.alt = item.name;
              cartItem.appendChild(itemImage);
        
              const itemName = document.createElement('p');
              itemName.textContent = item.name;
              cartItem.appendChild(itemName);
        
              const itemPrice = document.createElement('p');
              itemPrice.textContent = item.price;
              cartItem.appendChild(itemPrice);
        
              cartList.appendChild(cartItem);
            });
          } else {
            // Se o carrinho estiver vazio, exibe uma mensagem
            cartList.innerHTML = '<p>Carrinho vazio</p>';
          }
        }
        
        // Chama a função para exibir os itens do carrinho ao carregar a página
        window.onload = displayCart;
    </script>
    <script>
        function buscarEndereco() {
            var cep = document.getElementById('cepInput').value;
            var url = `https://viacep.com.br/ws/${cep}/json/`;
            
            fetch(url)
            .then(response => response.json())
            .then(data => {
                if(data.erro) {
                    document.getElementById('endereco').innerText = "CEP não encontrado.";
                } else {
                    var endereco = `CEP: ${data.cep}, ${data.logradouro}, ${data.bairro}, ${data.localidade}, ${data.uf}`;
                    document.getElementById('endereco').innerText = endereco;
                }
            })
            .catch(error => console.error('Erro:', error));
        }
    </script>
</body>
</html>